{% extends 'hotelapp/index_charts.html' %}
    {% load city_tags %}

{#å¤šappçš„æ–¹æ¡ˆä¸­templateéœ€è¦è¿™æ ·æ¥å¼•å…¥ï¼Œviewä¸­ä¹Ÿæ˜¯éœ€è¦åŠ ä¸Š#}
{% block title %}
{{ app_name }}
{% endblock %}


{#{% block drawer_body %}mdui-drawer-body-left{% endblock %}#}

{% block drawer_icon %}
{% endblock %}

{% block drawer %}

{% endblock %}
{#å…¶ä¸­ä¸€ä¸ªéƒ¨åˆ†#}




{% block app_name %}
{{ app_name }}
{% endblock %}

{% block name %}
{{ app_name }}
{% endblock %}

{% block content %}


<div class="mdui-container">
	<div class="totop"></div>
    <div class="mdui-fab-wrapper" mdui-fab="">
      <button id="totop" class="mdui-fab mdui-ripple mdui-color-theme-accent">
    <i class="mdui-icon material-icons">vertical_align_top</i>
      </button>
    </div>

<!--<form>-->
<div class="mdui-center mdui-row" style="padding-bottom: 40px;">
     <div class=" mdui-col-xs-9  mdui-btn-block">
              <input  name="keyword" class="mdui-btn-block mdui-textfield-input" type="text"
                      placeholder="æˆ¿æºä½ç½®å…³é”®è¯æœç´¢,å¦‚:å¹¿å·å¤©æ²³" required/>
         <div id = "progress" style="display: none">
             <div class="mdui-progress" >
                 <div class="mdui-progress-indeterminate"></div>
             </div>
         </div>
     </div>
    <div class="mdui-col-xs-2  mdui-btn-block">
        <button id="ajax_get" type="submit"  class="mdui-btn ">
         <i class="mdui-icon material-icons">search</i>æœç´¢
        </button>
    </div>

</div>

ä»·æ ¼èŒƒå›´
<label class="mdui-slider mdui-slider-discrete" style="width:400px;" >
      <input id="money_range" type="range" step="10" min="50" max="5000" />
</label>


<!--</form>-->
    <main id="main_content" style="padding-top: 50px;">
            <h3 class="mdui-text-center" id ="hide">è¯·è¾“å…¥å…³é”®è¯åè¿›è¡Œæœç´¢</h3>
    </main>

        <!--<label class="mdui-slider mdui-slider-discrete">-->
          <!--<input type="range" step="1" min="0" max="8000"/>-->
        <!--</label>-->
    <script>
        // $("#progress").hide();

        var $$ = mdui.JQ;  //è¿™ä¸ªæ˜¯ä¸ºäº†ä½¿ç”¨å·¥å…·æç¤º
            // $(document).ready(function() {

                $("#ajax_get").click(function () {
                      mdui.snackbar({
                            message: 'æœç´¢ä¸­...'
                          });

                    var keyword = $('input[name="keyword"]').val();
                    var money_range = $('input[id="money_range"]').val();
                    // var city = $('input:radio:checked').val();
                    // alert(keyword);
                    if (keyword!==""){
                        $("#progress").show();
                        $("#ajax_get").attr("disabled", true);  //è¿›åº¦æ¡å»æ‰


                        $.ajax({
                                type: "POST",
                                url: "{% url 'hotelapp:search_keyword' %}",
                                dataType: 'json',
                                data :{
                                    keyword:keyword,
                                    money_range:money_range,
                                    // city:city,
                                },
                                timeout:90000,  //60ç§’
                                // async: false,
                                success: function (result) {
                                    // alert(result.data);
                                    // timeline_chart.setOption(result.data);
                                    $('#hide').css('display', 'none');  // ç»„ä»¶å®Œå…¨éšè—ï¼Œä¸å ç”¨æ˜¾ç¤ºæ—¶å ç”¨çš„ä½ç½®
                                    // $('#timeline').css('display', 'block');   //åœ¨è®¾ç½®ç»„ä»¶å¯ä»¥çœ‹
                                    $('#main_content').empty();  // åˆ™æ¸…ç©ºé‚£å„¿çš„å†…å®¹ï¼Œç„¶åé‡æ–°ç»„åˆå¢åŠ å†…å®¹
                                    $('#main_content').append(result.data.table.toString());
                                     $("#progress").hide();  //è¿›åº¦æ¡å»æ‰
                                     $("#ajax_get").attr("disabled", false);  //æŒ‰é’®å¯ä»¥é‡æ–°ç‚¹å‡»

                                }, error: function () {
                                        //è¯·æ±‚å‡ºé”™å¤„ç†
                                         mdui.snackbar({
                                            message: 'è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åå†è¯•ï¼ğŸ˜±'
                                          });
                                          $("#progress").hide();  //è¿›åº¦æ¡å»æ‰
                                         $("#ajax_get").attr("disabled", false);  //æŒ‰é’®å¯ä»¥é‡æ–°ç‚¹å‡»
                                    }
                            });
                    }else{
                        mdui.snackbar({
                            message: 'è¯·å…ˆè¾“å…¥å…³é”®å­—å“¦ï¼'
                          });
                            // $("#ajax_get").attr("disabled", false);  //è¿›åº¦æ¡å»æ‰
                            // $("#progress").hide();  //è¿›åº¦æ¡å»æ‰
                    }
                        });
            // })
    </script>

<script>
    //å›åˆ°é¡¶éƒ¨
    $(function(){
			$totop = $('#totop');

			$(window).scroll(function(){
				// è·å–æ»šåŠ¨æ¡æ»šåŠ¨çš„é«˜åº¦
				var iNum = $(document).scrollTop();
				if(iNum>400){
					$totop.fadeIn();
				}
				else
				{
					$totop.fadeOut();
				}

			});
			$totop.click(function(){
				$('html,body').animate({'scrollTop':0});
			})


		});


</script>



</div>


{% endblock %}



{% block tail %}
{% endblock %}



</div>