# è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªDjango+ scrapyç»“åˆçš„æ¨¡æ¿



scrapyä½¿ç”¨djangoItem åº“ï¼Œæ¥ä½¿ç”¨djangoçš„modelsã€‚è¿™æ ·å°±å¯ä»¥ä½¿ç”¨scrapyå°†çˆ¬å–åˆ°çš„æ•°æ®é€šè¿‡django ormæ¡†æ¶ï¼Œç„¶ååœ¨adminä¸­å¯ä»¥ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ã€‚è¿™æ ·å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç»Ÿä¸€æ•°æ®åº“ï¼Œå¹¶ä¸”å› ä¸ºä½¿ç”¨äº†ormæ¥æ“ä½œï¼Œscrapyä¿å­˜çš„æ—¶å€™æ›´ä¸ºæ–¹ä¾¿ï¼Œå°±æ˜¯é…ç½®çš„æ—¶å€™éº»çƒ¦ç‚¹ï¼Œæ•…æŠŠåˆå¹¶åçš„æ¨¡æ¿æ”¾åœ¨è¿™å„¿ï¼ŒğŸ˜‚åŠŸèƒ½å°±æ˜¯åˆå¹¶å¥½åæ–¹ä¾¿ä»¥åç»“åˆè¿™ä¸¤ä¸ªç»§ç»­å¼€å‘æ–°çš„ä¸œè¥¿åšå‡†å¤‡

## å¤§æ¦‚çš„é…ç½®æ­¥éª¤



é¡¹ç›®çš„ç›®å½•å¦‚ä¸‹ï¼š

```python
Scrapy-django
â”œâ”€â”€â”€mydjango(djangoé¡¹ç›®)
â”‚   â”‚   manage.py
â”‚   â”œâ”€â”€â”€myapp
â”‚   â”‚
â”‚   â””â”€â”€â”€mydjango
â””â”€â”€â”€myscrapyï¼ˆscrapyé¡¹ç›®ï¼‰
    â”‚   scrapy.cfg
    â”‚   
    â””â”€â”€â”€myscrapy
        â”œâ”€â”€â”€spiders
        â”‚   meiju.py
        â”‚__init__.py
```



+ åˆ›å»ºå¥½Djangoé¡¹ç›®
  + é…ç½®å¥½mysqlè¿æ¥å’Œåˆ›å»ºå¥½superuser
  + åˆ›å»ºå¥½ä¸€ä¸ªå¯¹åº”çš„appæ¥ä½¿ç”¨å®ƒçš„modelsæ¥å»ºè¡¨
  + python manage.py makemigrations myapp
  + python manage.py migrate 
  + python manage.py runserver
+ åˆ›å»ºå¥½å¯ç”¨çš„scrapyé¡¹ç›®ï¼Œç„¶åé…ç½®settings
  + pip install scrapy-djangoitem
  + settings æŒ‰è¦æ±‚è®¾ç½®å¥½djangoç›®å½•
  + items.py ä¸­å¯¼å…¥django modelsä¸­çš„æ¨¡å‹ï¼Œç”¨scrapy-djangoitemæ¥ç»§æ‰¿
  + ç„¶ååœ¨spidersä¸­è°ƒç”¨itemæ¥å‚¨å­˜
  + é…ç½®å¥½ç®¡é“å¹¶ä¸”å¼€å¯item.save()å³å¯

# æœ¬æ¨¡æ¿ç¯å¢ƒä¾èµ–å‚è€ƒ

django 2.0

scrapy 1.7.3

mysql 5.7

scrapy_djangoitem

ç­‰ï¼Œå¦‚æœé‡åˆ°æç¤ºè¯´è¦å®‰è£…å†pip install å³å¯


# ç»“æœç¤ºèŒƒ

![](example1.png)

# todo

ä¸¤ä¸ªéƒ¨åˆ†æ¥è¿›è¡Œå·¥ä½œï¼š

DJangoéƒ¨åˆ†ï¼š

1.å¢åŠ æ›´å¤šæ•°æ®æŒ–æ˜ç®—æ³•ç›¸å…³çš„åŠŸèƒ½ï¼Œæˆ–è€…å¯¹æ•°æ®è¿›è¡Œå»ºæ¨¡ï¼Œè¿›ä¸€æ­¥åˆ†æã€‚

Scrapyéƒ¨åˆ†ï¼š

1.å†™å¥½è„šæœ¬æ¯æ—¥å®šæ—¶æ£€æŸ¥çˆ¬è™«è¿è¡ŒçŠ¶æ€ï¼Œå¦‚æœåœæ­¢å°±é‡æ–°å¯åŠ¨
2.å¢åŠ æ›´å¥½å¢åŠ åŸå¸‚èŒƒå›´çš„è®¾å®šï¼Œæ–¹ä¾¿è°ƒæ•´æŠ“å–çš„èŒƒå›´
3.åçˆ¬ç ”ç©¶...
